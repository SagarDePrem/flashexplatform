<div class="bodytag">
    <!-- This tag is for wallpaper -->
</div>


<div *ngIf="isSignedUp; else signupForm" style="padding-top: 12vh;">

    <mat-card style="position: relative; top: 30%; text-align: center; width: max-content; max-width: 80%; margin: auto; vertical-align: 50%;">
    Congratulations, your registration is successful. Please click below to login.
    <br>

    <button style="margin: auto; position: relative; margin: 2em 0em 0em;
    top: 50%;" mat-raised-button color="primary" href="/auth/login">login!</button>
    </mat-card>
</div>

<ng-template #signupForm>


    <mat-card class="matcard">

        <mat-card-header>
            <mat-card-title>Signup</mat-card-title>
        </mat-card-header>


        <mat-card-content>
            <div class="row col-sm-6" style="max-width:350px;">
                <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
                    <div>
                        <br>
                        <div *ngIf="f.submitted && name.invalid">
                                <div *ngIf="name.errors.required">Name is required</div>
                                <div *ngIf="name.errors.minlength">Name must be between 3 to 30 characters</div>
                                <div *ngIf="name.errors.pattern">Only alphabets are allowed in Name.</div>
                        </div>
                        <mat-form-field appearance="outline">
                            <mat-label for="name">Your name</mat-label>
                            <input matInput placeholder="Your name" type="text" class="form-control" name="name" [(ngModel)]="form.name" #name="ngModel" required
                            minlength="3" maxlength="30" pattern="[a-zA-Z]*"/>
                        </mat-form-field>

                    </div>
                    <div>
                        <div *ngIf="f.submitted && username.invalid">
                            <div *ngIf="username.errors.required">Username is required</div>
                            <div *ngIf="username.errors.minlength">Username must be between 6 to 15 characters</div>
                            <div *ngIf="username.errors.pattern">No special characters allowed. At least one alphabet must be present.</div>
                        </div>

                        <mat-form-field appearance="outline">
                            <mat-label for="Username">Username</mat-label>
                            <input matInput placeholder="Username" type="text" class="form-control" name="username" [(ngModel)]="form.username" #username="ngModel" required
                            minlength="6" maxlength="15" pattern="^(?=.*[a-zA-Z])[a-zA-Z0-9]+$"/>
                            <mat-hint>Username should be between 6 to 15 characters</mat-hint>
                        </mat-form-field>
                    </div>
                    <br>
                    <div>
                        <div *ngIf="f.submitted && email.invalid">
                            <div *ngIf="email.errors.required">Email is required</div>
                            <div *ngIf="email.errors.pattern || email.errors.email">Email must be a valid email address</div>
                        </div>
                        <mat-form-field appearance="outline">
                            <mat-label for="email">Email</mat-label>
                            <input matInput placeholder="Email" type="text" class="form-control" name="email" [(ngModel)]="form.email" #email="ngModel" required email pattern="^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$" maxlength="40"/>
                        </mat-form-field>
                    </div>
                    <div>
                        <div *ngIf="f.submitted && password.invalid">
                            <div *ngIf="password.errors.required">Password is required</div>
                            <div *ngIf="password.errors.minlength || password.errors.pattern">Hint: Password must contain 6-14 characters, at least 1 uppercase, 1 lowercase, 1 number, 1 special characters.</div>
                        </div>
                        <mat-form-field appearance="outline">
                            <mat-label for="password">Password</mat-label>
                            <input matInput placeholder="Password" type="password" class="form-control" name="password" [(ngModel)]="form.password" #password="ngModel" required minlength="6" required maxlength="14"
                            pattern="^[&@$_.#!]{0,1}[a-zA-Z0-9]+[&@$_.#!]+[a-zA-Z0-9]+[&@$_.#!]{0,1}$" />
                            <mat-hint>Hint: Password must contain 6-14 characters, at least 1 uppercase, 1 lowercase, 1 number, 1 special characters. </mat-hint>
                        </mat-form-field>
                    </div>
                    <div>
                        <mat-card-actions style="padding-left:1em;">
                            <button mat-raised-button color="primary" class="btn btn-primary" style="margin-top: 2em;">Register</button>
                            <div *ngIf="f.submitted && isSignUpFailed" class="alert alert-warning">
                                Signup failed!<br/>{{errorMessage}}
                            </div>
                        </mat-card-actions>
                    </div>
                </form>
            </div>
        </mat-card-content>
    </mat-card>

</ng-template>

