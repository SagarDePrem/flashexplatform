<mat-toolbar class="navbar" color="primary">
    <img src="../assets/images/logo.png" routerLink='/admin'>
    <div fxLayout="row" fxLayoutAlign="center center">

        <span>{{userName}}</span>
        <button mat-button [matMenuTriggerFor]="menu">
                    <mat-icon  class= "person" mat-list-icon>person</mat-icon>
                </button>
        <mat-menu #menu="matMenu">
            <div style="width: 10em;">
                <p style="padding-left: 15px;"> {{role}}</p>
                <hr>
                <button mat-stroked-button style="font-size: 1em;margin-left:1em; width: 8em;" (click)="logout()">Logout</button>
            </div>
        </mat-menu>
    </div>

</mat-toolbar>
<mat-toolbar class="example-toolbar">
    <button mat-icon-button (click)="snav.toggle()"><mat-icon>menu</mat-icon></button>
    <h1 class="example-app-name">Trip Details</h1>
    <br>
    <p style="margin-left: auto; font-size: 0.85em;">{{scheduledDate| date:'longDate'}}</p>
    <!-- <button style="margin-left: auto;" mat-icon-button matTooltip="Logout" (click)="logout()"><mat-icon style="font-size: 25px;">person</mat-icon></button> -->
</mat-toolbar>
<mat-tab-group dynamicHeight>
    <mat-tab label="Today">
        <div class="example-small-box mat-elevation-z4">
            <mat-sidenav-container class="example-sidenav-container">
                <mat-sidenav opened="false" #snav [mode]="mobileQuery.matches ? 'over' : 'side'" [fixedInViewport]="mobileQuery.matches" fixedTopGap="56">
                    <mat-nav-list class="sidenav">
                        <a mat-list-item (click)="trips(i); snav.toggle()" *ngFor="let nav of dataSource, let i = index" matTooltip="{{nav.tripItineraryId}}">TRIP: 
                            {{nav.tripItineraryId.slice(0,10).concat("...")}}</a>
                    </mat-nav-list>
                </mat-sidenav>

                <mat-sidenav-content>
                    <mat-tab-group>
                        <mat-tab label="Trip Summary">
                            <div fxLayout="row" fxLayoutAlign="start start">
                                <!-- ---------------- -->
                                <div style="display: inline-grid;">
                                    <mat-list-item style="padding: 10px;"><span>Start Location </span>
                                        <p matTooltip="{{tripDetails.originAddress}}">WearHouse-1, Koramangala</p>
                                    </mat-list-item>
                                    <mat-divider></mat-divider>
                                    <mat-list *ngIf='tripDetails!=null'>
                                        <mat-list-item><span>Start Time </span> {{tripDetails.plannedStartTime| date: 'short'}}
                                            <p> <button mat-raised-button (click)="updateTripStart(tripDetails.tripItineraryId)" color="primary">Start Trip</button></p>
                                        </mat-list-item>
                                        <mat-divider></mat-divider>

                                        <mat-list-item><span>Order Type  </span> Perishable</mat-list-item>
                                        <mat-divider></mat-divider>
                                        <mat-list-item><span>Actual Start Time </span>
                                            <p>
                                                {{tripDetails.tripStart|date: 'short'}}</p>
                                        </mat-list-item>
                                        <mat-divider></mat-divider>
                                        <mat-list-item><span>End Time </span> {{tripDetails.plannedEndTime|date:'short'}}
                                            <p><button mat-raised-button (click)="updateTripEnd(tripDetails.tripItineraryId)" color="primary">End Trip</button></p>
                                        </mat-list-item>
                                        <mat-divider></mat-divider>
                                        <mat-list-item><span>Actual End Time</span>
                                            <p>
                                                {{tripDetails.tripEnd|date:'short'}}</p>
                                        </mat-list-item>
                                    </mat-list>
                                </div>
                                <!-- ------------------ -->
                                <div id="map"></div>
                            </div>
                        </mat-tab>
                        <mat-tab label="Order Details">
                            <mat-accordion class="example-headers-align" *ngFor="let order of listofOrders; let i = index">
                                <mat-expansion-panel hideToggle>
                                    <mat-expansion-panel-header>
                                        <mat-panel-title>
                                            <p>{{listofOrders[i].packetId}}</p>
                                        </mat-panel-title>
                                        <mat-panel-description>
                                            <p>
                                                <mat-icon style="font-size: 15px;
                                                line-height: 2; width: 15px;"><i class="material-icons">phone</i></mat-icon>
                                                {{listofOrders[i].phoneNumber}}</p>
                                            <p> {{listofOrders[i].customerName}}</p>


                                        </mat-panel-description>

                                    </mat-expansion-panel-header>
                                    <div>
                                        <span style="width: 50%; padding-left: 0ex;">
                                                <p>{{listofOrders[i].deliveryAddress.addressLine1}}  ,{{listofOrders[i].deliveryAddress.city}}
                                                </p>
                                                <p><button mat-raised-button  (click)= "updatePacketLog(tripDetails.tripItineraryId, listofOrders[i].packetId)" color="primary">Delivered 
                                                    {{listofOrders[i].packetStatus}}</button>
                                                </p>
                                            </span>
                                        <table style="float: right; width: 50%; margin-top: -6em;">
                                            <tr>
                                                <td>Reached to Hub</td>
                                                <td>Out for delivery</td>
                                                <td>succesfully Delivered</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <mat-progress-bar color="accent" mode="determinate" value="100"></mat-progress-bar>
                                                </td>

                                                <td>
                                                    <mat-progress-bar color="accent" mode="determinate" value="100"></mat-progress-bar>
                                                </td>
                                                <td>
                                                    <mat-progress-bar color="accent" mode="determinate" value="0"></mat-progress-bar>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </mat-expansion-panel>
                            </mat-accordion>
                        </mat-tab>
                    </mat-tab-group>
                </mat-sidenav-content>
            </mat-sidenav-container>
        </div>
    </mat-tab>
    <mat-tab style="height: 60%;" label="Tomorrow">
        <div fxLayout="row" fxLayoutAlign="center center">
            <a>
                <img style="height: 70vh;width: auto; align-content: center;" src="../../../../assets/images/nodata.jpg" />
            </a>
        </div>
    </mat-tab>
</mat-tab-group>